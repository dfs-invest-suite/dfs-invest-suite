dfs-invest-suite: Tu Plataforma Inteligente para la Gestión de Leads y Comunicación en el Sector Inmobiliario
Imagina que tienes una empresa inmobiliaria que, como muchas hoy en día, depende enormemente de WhatsApp para hablar con tus clientes potenciales (leads) e inversores. Es rápido, directo y todos lo usan. Pero, ¿qué pasa cuando intentas usarlo a gran escala o de forma muy activa?

El Problema Principal que Atacamos: ¡Los Baneos de WhatsApp!
Si envías muchos mensajes, usas números no oficiales o tus mensajes no son bien recibidos, WhatsApp puede bloquear tus números. Esto significa conversaciones cortadas, leads perdidos, mala imagen y un dolor de cabeza constante para tu equipo. Pierdes tiempo y dinero configurando números nuevos que vuelven a ser baneados.

Otros Problemas Comunes:
Gestión de Leads Desorganizada: Leads que llegan de diferentes campañas (anuncios, web) se pierden, no se les da seguimiento adecuado, o se contactan de forma genérica sin entender su interés real.
Ineficiencia Operacional: Mucho tiempo manual clasificando leads, asignándolos, escribiendo los mismos mensajes una y otra vez.

Oportunidades Perdidas: Leads "fríos" o "adormecidos" que podrían convertirse en clientes con el seguimiento y la información adecuada en el momento justo, son olvidados.
Falta de Visibilidad: No sabes realmente qué estrategias de comunicación funcionan mejor, cuáles son tus costos reales o cómo está la "salud" de tu comunicación por WhatsApp.

¿Qué es dfs-invest-suite?
dfs-invest-suite es una plataforma de software avanzada, construida en la nube y pensada para ser usada por múltiples empresas (multi-tenant). Su objetivo es transformar la manera en que las empresas (inicialmente del sector inmobiliario y SPEs) gestionan sus leads y se comunican con ellos, con un foco principal en resolver el problema de los baneos de WhatsApp y optimizar todo el ciclo de vida del lead.

Piensa en ella como el "sistema nervioso digital" de tu operación comercial.
Funcionalidades Clave y Problemas que Resuelve:
Núcleo Anti-Ban para WhatsApp (¡Nuestra Joya de la Corona!):
Problema que Resuelve: Baneos frecuentes de números, interrupción de la comunicación.
Cómo Funciona:
Uso Exclusivo de la API Oficial de WhatsApp Cloud: Garantiza que estás usando el canal legítimo y seguro de Meta.
Gestión Inteligente de Múltiples Números: Puedes conectar varios de tus números oficiales de WhatsApp. El sistema:
Monitorea la "Salud": Constantemente revisa la calidad de cada número según los reportes de Meta (calificación GREEN, YELLOW, RED) y nuestro propio "health score" interno.
Balanceo de Carga y Rotación: Distribuye los mensajes salientes entre tus números más saludables para evitar sobrecargar uno solo.
"Calentamiento" (Warm-up): Introduce gradualmente números nuevos con bajo volumen y mensajes de alta calidad para construir una buena reputación.
"Enfriamiento" (Cool-down): Si un número muestra signos de baja calidad, el sistema reduce su uso o lo pausa temporalmente, protegiéndolo de un baneo y usando otros números saludables.
Límites de Tasa Dinámicos: Se ajusta automáticamente a los límites de envío que Meta impone a cada número según su calidad y uso.
Validación de Contenido (Preventiva): Antes de enviar una plantilla, el sistema (con ayuda de IA en el futuro) puede revisar si el contenido podría infringir políticas.
Reacción a Alertas de Meta: Si Meta envía una advertencia o restricción (vía Webhook), el sistema puede tomar acciones automáticas (ej. pausar envíos desde un número).
Beneficio: Comunicación por WhatsApp mucho más estable, profesional y sin el miedo constante a los baneos. Te permite escalar tus campañas.
Gestión Inteligente de Leads (leads-flow):
Problema que Resuelve: Leads desorganizados, falta de seguimiento, pérdida de oportunidades.
Cómo Funciona:
Captación Centralizada: Importa leads desde diversas fuentes (Excel inicial, futuro CRM, portal-imoveis, anuncios).
Calificación Multidimensional con IA (aiper-assistance): Cuando un lead interactúa (ej. responde un mensaje WA, llena un formulario), la IA analiza la conversación para entender:
Intención: ¿Está solo curioseando, listo para comprar, tiene dudas específicas?
Capacidad Financiera: ¿Menciona un presupuesto?
Timing: ¿Para cuándo planea invertir?
Objeciones y Preferencias: ¿Qué le preocupa? ¿Qué tipo de propiedad/inversión busca?
Esto genera un score y etiquetas para el lead (ej. "Alto Potencial - Necesita Educación Legal SPE", "Interés Inmediato - Presupuesto $500k").
Nurturing Automatizado y Personalizado (Estrategia "DFS-Educa"):
Para leads que no están listos para comprar ya, el sistema puede enviarles secuencias de mensajes educativos y relevantes (usando plantillas de WhatsApp) para mantenerlos informados y "calentarlos" con el tiempo.
"DFS-Educa" usando Plantillas de Utilidad: La clave aquí es usar plantillas de UTILITY de WhatsApp (que pueden ser gratuitas dentro de la ventana de servicio con el nuevo modelo de precios) para enviar información valiosa que el lead podría haber solicitado o que es un seguimiento lógico a una interacción previa.
Ejemplo: Si un lead descargó un folleto sobre la "SPE Sol Nascente", una plantilla de utilidad podría ser: "Hola [Nombre], vimos su interés en SPE Sol Nascente. Aquí tiene un breve video sobre los avances de la obra: [link]. ¿Le gustaría que un asesor le explique los beneficios fiscales específicos? [Botón: Sí] [Botón: No ahora]".
Estos mensajes son percibidos como útiles por el cliente y cumplen las políticas de Meta, mientras mantienen a DFS en la mente del lead.
Asignación Inteligente (Roleta): Asigna automáticamente el lead calificado al consultor más adecuado según su expertise, carga de trabajo actual y, si aplica, historial con leads similares.
Beneficio: Maximiza el valor de cada lead, reduce la pérdida de oportunidades, y permite a los consultores enfocarse en los leads mejor preparados.
Inteligencia Artificial (aiper-assistance):
Problema que Resuelve: Análisis manual lento y subjetivo de conversaciones, respuestas genéricas.
Cómo Funciona:
Análisis de Conversaciones: Como se mencionó, para calificación de leads (intención, sentimiento, entidades).
Sugerencia de Respuestas (Futuro): Para consultores, basada en el contexto y FAQs.
Optimización de Prompts: Gestión interna para asegurar que las interacciones con APIs de IA (Gemini, GPT) sean eficientes y de bajo costo.
Ayuda en Diseño de Plantillas "DFS-Educa": Sugerir redacciones que sean informativas, útiles y conformes a políticas, con CTAs contextualmente apropiados.
Beneficio: Decisiones más rápidas y basadas en datos, comunicación más personalizada y eficiente.
Interfaces de Usuario Especializadas (PWAs):
pwa-supervisor (El "DevHub" para el Tenant):
Problema que Resuelve: Falta de visibilidad y control para los gerentes/supervisores.
Funcionalidad: Dashboard con KPIs de la operación del tenant (leads, conversiones, salud de números WA, costos WA, rendimiento de consultores). Gestión de leads (asignar, reasignar), gestión de consultores (usuarios del tenant), configuración de plantillas WhatsApp (creación, envío a aprobación de Meta), visualización de campañas de marketing WA.
pwa-consultant (Herramienta del Consultor):
Problema que Resuelve: Dificultad para los consultores en gestionar múltiples conversaciones, acceder al historial, y enviar mensajes personalizados eficientemente.
Funcionalidad: Lista de leads asignados, vista de "chat unificado" para interactuar con leads vía WhatsApp (usando la API oficial a través del backend, seleccionando plantillas, enviando mensajes libres), acceso al historial completo del lead, registro de actividades.
admin-platform (Panel de Control de la Suite para MetaShark/DFS):
Problema que Resuelve: Necesidad de gestionar la plataforma SaaS en sí.
Funcionalidad: Onboarding de nuevos tenants, gestión de sus suscripciones, monitoreo global de la salud de la plataforma, configuración de parámetros globales del sistema (ej. umbrales Anti-Ban por defecto).
Beneficio: Cada rol tiene una herramienta optimizada para sus necesidades, mejorando la eficiencia y la toma de decisiones.
portal-imoveis (Portal Público - Futuro):
Problema que Resuelve: Necesidad de una vitrina online moderna para las propiedades/SPEs de los tenants y un canal de captación de leads directo.
Cómo se Integraría:
Los tenants podrían listar sus SPEs.
Los visitantes podrían explorar y solicitar más información.
Formularios de contacto o botones "Contactar por WhatsApp" generarían nuevos leads directamente en leads-flow para el tenant correspondiente.
Beneficio: Canal de marketing y captación adicional, integrado con el flujo de gestión de leads.
Caso de Uso Integral (Ejemplo Realista con dfs-invest-suite):
Tenant "Inmobiliaria Alfa" lanza una campaña en Facebook Ads para su nueva "SPE Laguna Azul".
El anuncio tiene un botón "Más Info por WhatsApp" (CTWA).
Lead "Carlos" hace clic y envía el mensaje predefinido: "Hola, quiero info de SPE Laguna Azul."
dfs-invest-suite (Núcleo WhatsApp) recibe el Webhook:
WhatsappWebhookController valida la firma, identifica que el WABA_ID pertenece a "Inmobiliaria Alfa" (tenantId="alfa-123"). Encola el job.
WhatsappWebhookProcessor (contexto "alfa-123") procesa el mensaje y emite IncomingWhatsAppMessageReceivedEvent.
IncomingMessageApplicationListener (contexto "alfa-123"):
Crea/actualiza el Lead "Carlos" en la DB de "Inmobiliaria Alfa", asociándolo a la campaña "SPE Laguna Azul" (del referral del webhook).
Registra la interacción en MessageLog.
Llama a IConversationAnalyzerPort (aiper-assistance).
aiper-assistance: Analiza "Hola, quiero info de SPE Laguna Azul." -> Intención: "Solicitud_Info_Producto", Entidad: "SPE Laguna Azul", Sentimiento: Neutro.
QualifyLeadUseCase (contexto "alfa-123"): Recibe el análisis. Le da a Carlos un score inicial (ej. 70/100, "Lead Templado - Interés Específico").
Respuesta Inicial (Automatizada o por Consultor):
Opción 1 (Flujo "DFS-Educa" automatizado): El sistema, basado en la intención "Solicitud_Info_Producto", selecciona una plantilla UTILITY pre-aprobada para "Inmobiliaria Alfa": "Hola {{1}}, gracias por su interés en SPE Laguna Azul. Aquí tiene el folleto digital: [link]. Un asesor se pondrá en contacto pronto. ¿Prefiere que le contactemos por la mañana o por la tarde? [Botón: Mañana] [Botón: Tarde]".
SendWhatsAppMessageUseCase (contexto "alfa-123") -> AntiBanDecisionService selecciona el número más saludable de "Inmobiliaria Alfa" -> WhatsappOfficialApiAdapter envía la plantilla.
Opción 2 (Asignación a Consultor): AssignLeadUseCase (contexto "alfa-123") asigna Carlos al consultor "Roberto". pwa-consultant de Roberto recibe notificación. Roberto ve el mensaje y la calificación, y responde usando la interfaz de chat.
Interacción Continua:
Carlos responde "Mañana". El sistema registra esto.
Al día siguiente, Roberto (o el sistema) envía una plantilla de recordatorio o un mensaje libre (si dentro de CSW).
Todas las interacciones, cambios de estado de mensajes, y calidad de los números de "Inmobiliaria Alfa" son monitoreados por el Núcleo Anti-Ban. Si un número de "Inmobiliaria Alfa" baja su calidad, el sistema usará otro de sus números.
Supervisor de "Inmobiliaria Alfa" (usando pwa-supervisor):
Ve a Carlos en su pipeline de leads, su score, la conversación.
Monitorea la salud de los números WhatsApp de "Inmobiliaria Alfa".
Ve los costos de la campaña de WhatsApp.
Administrador de dfs-invest-suite (usando admin-platform):
Ve que "Inmobiliaria Alfa" es un tenant activo.
Monitorea la salud general de la plataforma, asegurándose de que no haya problemas sistémicos.
Este flujo ilustra cómo los diferentes módulos y la inteligencia de dfs-invest-suite trabajan juntos para resolver los problemas planteados, con el núcleo WhatsApp y Anti-Ban asegurando la comunicación fluida y segura para cada tenant.
