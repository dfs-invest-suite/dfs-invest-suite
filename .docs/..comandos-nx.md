git status
git add .
git commit -m "fix(test): Resuelve errores de test en value-objects, commands-queries y tenancy"
git push origin main

Comandos Clave de Nx (Ejecutados desde la Raíz del Monorepo dfs-invest-suite/)

1. Ejecutar Tests Unitarios e Integración (Jest)
   Para un proyecto específico:
   pnpm nx test <nombre-del-proyecto>

Ejemplos:
pnpm nx test ui-shared
pnpm nx test pwa-supervisor
pnpm nx test api-main
pnpm nx test core-domain-tenancy
pnpm nx test shared-utils
Para todos los proyectos que tengan un target test:
pnpm nx run-many --target=test --all
O de forma más concisa: pnpm nx test --all (si test es el target por defecto para esta acción)
Para proyectos afectados por tus cambios actuales (desde la rama main o tu base):
pnpm nx affected --target=test
pnpm nx affected:test (alias)
Con Cobertura de Código:
pnpm nx test <nombre-del-proyecto> --coverage
pnpm nx run-many --target=test --all --coverage
En Modo Watch (para desarrollo):
pnpm nx test <nombre-del-proyecto> --watch
Notas sobre Tests:
Muchos project.json en tu snapshot tienen "passWithNoTests": true (o false para los que ya tienen tests). A medida que añadas tests, querrás cambiar esto a false o eliminar la línea.
La configuración de Jest (jest.config.ts por proyecto y jest.preset.js en la raíz) define cómo se ejecutan los tests.
El error "Maximum call stack size exceeded" que vimos antes ocurría durante la fase de "procesamiento del grafo del proyecto" que Nx realiza antes de ejecutar el comando lint (y lo haría también para test o build). Si ese problema de grafo no está resuelto, afectará a todos estos comandos. Asumiremos por ahora que las correcciones de tsconfig que discutimos lo han mitigado.

2. Construir Aplicaciones y Librerías (Builds)
   Para una aplicación específica (ej. api-main o pwa-supervisor):
   pnpm nx build <nombre-de-la-app>
   Ejemplos:
   pnpm nx build api-main (para el build de desarrollo por defecto)
   pnpm nx build api-main --configuration=production (para el build de producción)
   pnpm nx build pwa-supervisor
   pnpm nx build pwa-supervisor --configuration=production
   Para una librería específica (si tiene un target de build definido en su project.json):
   pnpm nx build <nombre-de-la-libreria>
   Ejemplo (si ui-shared tuviera un target build explícito):
   pnpm nx build ui-shared
   Nota: Muchas librerías en un monorepo Nx (especialmente las consumidas internamente por aplicaciones que las compilan como parte de su propio proceso de build, como Next.js o Webpack) no necesitan un target de build explícito. Nx las compilará "sobre la marcha" o como parte del build de la aplicación dependiente. ui-shared actualmente no tiene un target build en su project.json del snapshot.
   Para todas las aplicaciones construibles:
   pnpm nx run-many --target=build --all --configuration=production (para builds de producción)
   Para aplicaciones y sus dependencias construibles afectadas por tus cambios:
   pnpm nx affected --target=build --configuration=production
   Notas sobre Builds:
   Los artefactos de build generalmente se colocan en la carpeta dist/ en la raíz del monorepo (ej. dist/apps/api-main, dist/apps/pwa-supervisor, dist/libs/ui-shared si se construye).
   La configuración del build (qué ejecutor usar, opciones, etc.) está en el project.json de cada aplicación/librería.

3. Visualizar el Grafo de Dependencias del Proyecto
   Comando Principal:
   pnpm nx graph
   O pnpm nx dep-graph (alias)
   Abrir en el Navegador: Este comando generalmente inicia un servidor local y abre el grafo interactivo en tu navegador.
   Utilidad:
   Visualizar cómo están conectados tus proyectos (aplicaciones y librerías).
   Entender el impacto de los cambios (seleccionando un proyecto para ver qué es afectado o de qué depende).
   Identificar dependencias no deseadas o ciclos (aunque ESLint con enforce-module-boundaries debería atraparlos).
   Filtrar por tags, nombres de proyecto, etc.
   Para ver proyectos afectados en el grafo:
   pnpm nx affected:graph
   O pnpm nx affected --graph

4. Servir Aplicaciones en Modo Desarrollo (con Hot Reloading)
   Para una aplicación específica:
   pnpm nx serve <nombre-de-la-app>

Ejemplos:
pnpm nx serve api-main (Tu project.json lo configura para depender de api-main:build)
pnpm nx serve pwa-supervisor

5. Otros Comandos Nx Útiles:
   Listar Proyectos:
   pnpm nx show projects
   Mostrar Configuración de un Proyecto (incluyendo sus targets):
   pnpm nx show project <nombre-del-proyecto>
   Ejemplo: pnpm nx show project ui-shared
   Generar Nuevos Componentes/Librerías/Aplicaciones (Ejemplos):
   pnpm nx g @nx/next:app <nueva-app-next> --appDir=true --style=css
   pnpm nx g @nx/react:lib <nueva-lib-react> --bundler=vite (o rollup, o dejar que Nx elija)
   pnpm nx g @nx/js:lib <nueva-lib-js-pura>
   pnpm nx g @nx/nest:module <nombre-modulo> --project=api-main
   pnpm nx g @nx/nest:service <nombre-servicio> --project=api-main --directory=app/mi-modulo
   pnpm nx g @nx/react:component <nombre-componente> --project=ui-shared --directory=src/components/custom --export
   Ejecutar un Comando Arbitrario en el Contexto de un Proyecto (exec):
   pnpm nx exec --project=<nombre-proyecto> -- <tu-comando-aqui>
   Ejemplo (aunque vimos que eslint --version dio problemas, este es el patrón):
   pnpm nx exec --project=api-main -- nest info
   (Este es el comando que falló antes para eslint --version debido a la resolución de paths con PNPM. Para comandos bien definidos por plugins, Nx suele ser más robusto).
   Resumen para tus Pruebas Inmediatas:
   Resuelve el Problema del Grafo (si aún existe):
   Asegúrate de que los tsconfig.\*.json de libs/ui-shared/ (y de otras librerías si el error se mueve) no tengan ciclos y extiendan correctamente.
   Ejecuta pnpm nx reset después de cambios en tsconfig.
   Prueba con pnpm nx graph. Si se genera y abre, ¡es una buena señal!
   Prueba el Linting (si quieres volver a intentarlo):
   pnpm nx lint ui-shared
   pnpm nx lint pwa-supervisor
   Aplica las correcciones de ESLint que discutimos si los errores son de reglas y no del grafo.
   Prueba el Funcionamiento de pwa-supervisor:
   Asegúrate de que ui-shared exporte los componentes que pwa-supervisor intenta importar.
   pnpm nx serve pwa-supervisor
   Verifica en el navegador como detallamos en la respuesta anterior.
   Prueba el Build de Producción:
   pnpm nx build pwa-supervisor --configuration=production
   pnpm nx start pwa-supervisor (o el comando para servir el build) y verifica en el navegador.
   Estos comandos te dan el control para testear, construir y analizar tu monorepo Nx. El grafo de dependencias es especialmente útil para entender la estructura. ¡Suerte con las pruebas!
   pnpm nx serve api-main
   pnpm nx build api-main --configuration=production
   pnpm nx show project api-main

pnpm nx run-many --target=lint --all --fix --skip-nx-cache
pnpm nx run-many --target=test --all --skip-nx-cache
